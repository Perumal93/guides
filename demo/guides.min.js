/*
 * guides 1.2.6
 * Simple way to highlighting DOM elements and guide your users with step-by-step welcome tours in your web app.
 * https://github.com/ejulianova/guides
 *
 * Copyright 2015, Elena Petrova <elena.julianova@gmail.com>
 * Released under the MIT license.
*/

!function t(i,e,s){function h(n,r){if(!e[n]){if(!i[n]){var a="function"==typeof require&&require;if(!r&&a)return a(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var d=e[n]={exports:{}};i[n][0].call(d.exports,function(t){var e=i[n][1][t];return h(e?e:t)},d,d.exports,t,i,e,s)}return e[n].exports}for(var o="function"==typeof require&&require,n=0;n<s.length;n++)h(s[n]);return h}({1:[function(t,i,e){"use strict";var s=t("./modules/Guides");$.fn.guides=function(t,i){return this.each(function(){var e=$(this),h=e.data("guides"),o="object"==typeof t&&t;(h||"string"!=typeof o)&&(h||e.data("guides",h=new s(this,o)),"string"==typeof t&&h[t](i))})},$.guides=function(t){return new s(null,t)},$.fn.guides.Constructor=s},{"./modules/Guides":3}],2:[function(t,i,e){var s=t("./format"),h=function(t,i,e){this.guide=t,this._distance=t.distance||e.distance,this._color=t.color||e.color,this._class=t.cssClass||e.cssClass||"",this.$highlightedElement=$(t.element).addClass("guides-current-element"),this.$container=i,this.init()};h.prototype._arrowSize=10,h.prototype._path="M{0},{1} C{2},{3},{4},{5},{6},{7}",h.prototype._arrowTemplate='<svg width="{0}" height="{1}">    <defs>        <marker id="arrow" markerWidth="13" markerHeight="13" refX="2" refY="6" orient="auto">            <path d="M2,1 L2,{3} L{3},6 L2,2" style="fill:{4};"></path>        </marker>    </defs>    <path id="line" d="{2}" style="stroke:{4}; stroke-width: 1.25px; fill: none; marker-end: url(#arrow);"></path></svg>',h.prototype.init=function(){return this.$guide=$("<div />",{class:"guides-fade-in guides-guide "+this._class,html:"<span>"+this.guide.html+"</span>"}),this._position(),this},h.prototype._position=function(){this.$highlightedElement&&this.$highlightedElement.length>0?(this._attachToElement(),this.$guide.appendTo(this.$container),this._renderArrow()):this._center(),this._scrollIntoView()},h.prototype._center=function(){this.$guide.css("visibility","hidden").appendTo(this.$container).addClass("guides-center").css({left:0,right:0,textAlign:"center",top:window.innerHeight/2-this.$guide.outerHeight()/2}).css("visibility","visible")},h.prototype._attachToElement=function(){var t=this.$highlightedElement.offset(),i=$("body").width(),e=$("body").height(),s=t.left,h=t.top,o=this.$highlightedElement.outerWidth(),n=this.$highlightedElement.outerHeight(),r=i-s-o,a=e-h-n,d={color:this._color,top:e/2>t.top?t.top:"auto",left:i/2>t.left?t.left:"auto",right:i/2>t.left?"auto":i-t.left-o,bottom:e/2>t.top?"auto":t.bottom};switch(Math.max(s,r,h,a)){case s:this.position="left",d.paddingRight=this._distance,d.right=$(document).width()-t.left;break;case h:this.position="top",d.paddingBottom=this._distance,d.bottom=$(document).height()-t.top;break;case r:this.position="right",d.paddingLeft=this._distance,d.left=t.left+o;break;default:this.position="bottom",d.paddingTop=this._distance,d.top=t.top+n}this.$guide.addClass("guides-"+this.position).css(d)},h.prototype._renderArrow=function(){this._width=this.$guide.outerWidth(),this._height=this.$guide.outerHeight(),this.$guide.append(s(this._arrowTemplate,this._width,this._distance,this[this.position](),this._arrowSize,this._color))},h.prototype.top=function(){var t=this._verticalAlign();return this._getPath(t)},h.prototype.bottom=function(){var t=this._verticalAlign(!0);return this._getPath(t)},h.prototype.left=function(){var t=this._horizontalAlign();return this._getPath(t)},h.prototype.right=function(){var t=this._horizontalAlign(!0);return this._getPath(t)},h.prototype._getPath=function(t){return s(this._path,t.x1,t.y1,t.dx1,t.dy1,t.dx2,t.dy2,t.x2,t.y2)},h.prototype._getFluctuation=function(){return Math.floor(20*Math.random())+10},h.prototype._verticalAlign=function(t){var i=this._width/2,e=t?this._distance:0,s=Math.max(Math.min(this.$highlightedElement.offset().left+this.$highlightedElement.outerWidth()/2-this.$guide.offset().left,this._width-this._arrowSize),this._arrowSize),h=t?this._arrowSize:this._distance-this._arrowSize;return{x1:i,y1:e,x2:s,y2:h,dx1:Math.max(0,Math.min(Math.abs(2*i-s)/3,this._width)+this._getFluctuation()),dy1:t?Math.max(0,h+3*Math.abs(e-h)/4):Math.max(0,e+3*Math.abs(e-h)/4),dx2:Math.max(0,Math.min(Math.abs(i-3*s)/2,this._width)-this._getFluctuation()),dy2:t?Math.max(0,h+3*Math.abs(e-h)/4):Math.max(0,e+3*Math.abs(e-h)/4)}},h.prototype._horizontalAlign=function(t){var i=t?this._distance:this._width-this._distance,e=this._height/2,s=t?this._arrowSize:this._width-this._arrowSize,h=Math.max(Math.min(this.$highlightedElement.offset().top+this.$highlightedElement.outerHeight()/2-this.$guide.offset().top,this._height-this._arrowSize),this._arrowSize);return{x1:i,y1:e,x2:s,y2:h,dx1:t?Math.max(0,s+3*Math.abs(i-s)/4):Math.max(0,i+3*Math.abs(i-s)/4),dy1:Math.max(0,Math.min(Math.abs(2*e-h)/3,this._height)+this._getFluctuation()),dx2:t?Math.max(0,s+3*Math.abs(i-s)/4):Math.max(0,i+3*Math.abs(i-s)/4),dy2:Math.max(0,Math.min(Math.abs(e-3*h)/2,this._height)+this._getFluctuation())}},h.prototype._scrollIntoView=function(){if(0===this.$highlightedElement.length)return void $("html,body").animate({scrollTop:0},500);var t=this.$highlightedElement.offset(),i=this.$guide.offset(),e=Math.min(t.top,i.top),s=Math.max(t.top+this.$highlightedElement.outerHeight(),i.top+this.$guide.outerHeight()),h=Math.min(t.left,i.left),o=Math.max(t.left+this.$highlightedElement.outerWidth(),i.top+this.$guide.outerWidth()),n=$(document).scrollTop(),r=$(document).scrollLeft();(n>e||n+$(window).height()<s)&&$("html,body").animate({scrollTop:this.$highlightedElement.offset().top},500),(r>h||r+$(window).width()<o)&&$("html,body").animate({scrollLeft:this.$highlightedElement.offset().left},500)},h.prototype.destroy=function(){this.$highlightedElement.removeClass("guides-current-element"),this.$guide.remove()},i.exports=h},{"./format":4}],3:[function(t,i,e){var s=t("./Guide"),h=function(t,i){this.element=t,this.$element=$(t),this.options={},this._current=0,this.setOptions(i),t&&this.$element.on("click.guides",$.proxy(this.start,this))};h.DEFAULTS={distance:100,color:"#fff",cssClass:"",guides:[]},h.prototype.start=function(t){return t&&t.preventDefault(),this._isAlreadyRunning()?this:(this._current=0,this._renderCanvas()._renderGuide(this.options.guides[this._current])._callback("start"),this)},h.prototype.end=function(){return this.$canvas&&(this.$canvas.remove(),this.$canvas=null),this._currentGuide&&(this._currentGuide.destroy(),this._currentGuide=null),$(document).off("keyup.guides"),this._callback("end"),this},h.prototype.next=function(){return this._renderGuide(this.options.guides[++this._current])._callback("next"),this},h.prototype.prev=function(){if(this._current)return this._renderGuide(this.options.guides[--this._current])._callback("prev"),this},h.prototype.setOptions=function(t){return"object"!=typeof t?this:void(this.options=$.extend({},h.DEFAULTS,this.options,t))},h.prototype.destroy=function(){return this.end(),this.$element.off("click.guides"),this._callback("destroy"),this},h.prototype._callback=function(t){var i=this.options[t],e={sender:this};this._currentGuide&&(e.$element=this._currentGuide.guide.element,e.$guide=this._currentGuide.$element),$.isFunction(i)&&i.apply(this,[e])},h.prototype._isAlreadyRunning=function(){return!!this.$canvas},h.prototype._renderCanvas=function(){return this.$canvas=$("<div />",{class:"guides-canvas guides-fade-in",html:'<div class="guides-overlay"></div><div class="guides-mask"></div>'}).appendTo("body"),this._bindNavigation(),this},h.prototype._renderGuide=function(t){return t?(this._currentGuide&&this._currentGuide.destroy(),this._currentGuide=new s(t,this.$canvas,this.options),this):(this.end(),this)},h.prototype._bindNavigation=function(){return this.$canvas.on("click.guides",$.proxy(this._onCanvasClick,this)),$(document).on("keyup.guides",$.proxy(this._onDocKeyUp,this)),this},h.prototype._onCanvasClick=function(t){this.next()},h.prototype._onDocKeyUp=function(t){switch(t.which){case 27:this.end();break;case 39:case 32:this.next();break;case 37:case 8:t.preventDefault(),this.prev()}},i.exports=h},{"./Guide":2}],4:[function(t,i,e){i.exports=function(){for(var t=arguments[0],i=0;i<arguments.length-1;i++){var e=new RegExp("\\{"+i+"\\}","gm");t=t.replace(e,arguments[i+1])}return t}},{}]},{},[1]);