/*
 * guides 1.2.0
 * Simple lightweight Javascript library for highlighting DOM elements and making guided website welcome tours.
 * https://github.com/ejulianova/guides
 *
 * Copyright 2015, Elena Petrova <elena.julianova@gmail.com>
 * Released under the MIT license.
*/

!function t(e,i,s){function o(r,h){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return o(i?i:t)},u,u.exports,t,e,i,s)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)o(s[r]);return o}({1:[function(t,e,i){"use strict";var s=t("./modules/Guides");$.fn.guides=function(t,e){return this.each(function(){var i=$(this),o=i.data("guides"),n="object"==typeof t&&t;(o||"string"!=typeof n)&&(o||i.data("guides",o=new s(this,n)),"string"==typeof t&&o[t](e))})},$.fn.guides.Constructor=s},{"./modules/Guides":3}],2:[function(t,e,i){var s=t("./format"),o=function(t,e,i){this.guide=t,this._distance=t.distance||i.distance,this._color=t.color||i.color,this._class=t.cssClass||i.cssClass||"",this._origElWidth=this.guide.element.outerWidth(),this._origElHeight=this.guide.element.outerHeight(),this.$container=e,this.init()};o.prototype._arrowSize=10,o.prototype._path="M{0},{1} C{2},{3},{4},{5},{6},{7}",o.prototype._arrowTemplate='<svg width="{0}" height="{1}">    <defs>        <marker id="arrow" markerWidth="13" markerHeight="13" refX="2" refY="6" orient="auto">            <path d="M2,1 L2,{3} L{3},6 L2,2" style="fill:{4};"></path>        </marker>    </defs>    <path id="line" d="{2}" style="stroke:{4}; stroke-width: 1.25px; fill: none; marker-end: url(#arrow);"></path></svg>',o.prototype.init=function(){return this.$element=$("<div />",{class:"guides-fade-in guides-guide "+this._class,html:"<span>"+this.guide.html+"</span>"}),this._position(),this.$element.appendTo(this.$container),this._renderArrow(),this._scrollIntoView(),this},o.prototype._position=function(){var t=this.guide.element.offset(),e=$(document).width(),i=$(document).height(),s=t.left,o=e-t.left-this._origElWidth,n=t.top,r=i-t.top-this._origElHeight,h={color:this._color,top:i/2>t.top?t.top:"auto",left:e/2>t.left?t.left:"auto",right:e/2>t.left?"auto":e-t.left-this._origElWidth,bottom:i/2>t.top?"auto":t.bottom};switch(Math.max(s,o,n,r)){case s:this.position="left",h.paddingRight=this._distance,h.right=$(document).width()-t.left;break;case n:this.position="top",h.paddingBottom=this._distance,h.bottom=$(document).height()-t.top;break;case o:this.position="right",h.paddingLeft=this._distance,h.left=t.left+this._origElWidth;break;default:this.position="bottom",h.paddingTop=this._distance,h.top=t.top+this._origElHeight}this.$element.addClass("guides-"+this.position).css(h)},o.prototype._renderArrow=function(){this._width=this.$element.outerWidth(),this._height=this.$element.outerHeight(),this.$element.append(s(this._arrowTemplate,this._width,this._distance,this[this.position](),this._arrowSize,this._color))},o.prototype.top=function(){var t=this._verticalAlign();return this._getPath(t)},o.prototype.bottom=function(){var t=this._verticalAlign(!0);return this._getPath(t)},o.prototype.left=function(){var t=this._horizontalAlign();return this._getPath(t)},o.prototype.right=function(){var t=this._horizontalAlign(!0);return this._getPath(t)},o.prototype._getPath=function(t){return s(this._path,t.x1,t.y1,t.dx1,t.dy1,t.dx2,t.dy2,t.x2,t.y2)},o.prototype._getFluctuation=function(){return Math.floor(20*Math.random())+10},o.prototype._verticalAlign=function(t){var e=this._width/2,i=t?this._distance:0,s=Math.max(Math.min(this.guide.element.offset().left+this._origElWidth/2-this.$element.offset().left,this._width-this._arrowSize),this._arrowSize),o=t?this._arrowSize:this._distance-this._arrowSize;return{x1:e,y1:i,x2:s,y2:o,dx1:Math.max(0,Math.min(Math.abs(2*e-s)/3,this._width)+this._getFluctuation()),dy1:t?Math.max(0,o+3*Math.abs(i-o)/4):Math.max(0,i+3*Math.abs(i-o)/4),dx2:Math.max(0,Math.min(Math.abs(e-3*s)/2,this._width)-this._getFluctuation()),dy2:t?Math.max(0,o+3*Math.abs(i-o)/4):Math.max(0,i+3*Math.abs(i-o)/4)}},o.prototype._horizontalAlign=function(t){var e=t?this._distance:this._width-this._distance,i=this._height/2,s=t?this._arrowSize:this._width-this._arrowSize,o=Math.max(Math.min(this.guide.element.offset().top+this._origElHeight/2-this.$element.offset().top,this._height-this._arrowSize),this._arrowSize);return{x1:e,y1:i,x2:s,y2:o,dx1:t?Math.max(0,s+3*Math.abs(e-s)/4):Math.max(0,e+3*Math.abs(e-s)/4),dy1:Math.max(0,Math.min(Math.abs(2*i-o)/3,this._height)+this._getFluctuation()),dx2:t?Math.max(0,s+3*Math.abs(e-s)/4):Math.max(0,e+3*Math.abs(e-s)/4),dy2:Math.max(0,Math.min(Math.abs(i-3*o)/2,this._height)+this._getFluctuation())}},o.prototype._scrollIntoView=function(){($(document).scrollTop()>this.guide.element.offset().top||$(document).scrollTop()+$(window).height()<this.guide.element.offset().top)&&$("html,body").animate({scrollTop:this.guide.element.offset().top},500),($(document).scrollLeft()>this.guide.element.offset().left||$(document).scrollLeft()+$(window).height()<this.guide.element.offset().left)&&$("html,body").animate({scrollLeft:this.guide.element.offset().left},500)},o.prototype.destroy=function(){this.$element.remove()},e.exports=o},{"./format":4}],3:[function(t,e,i){var s=t("./Guide"),o=function(t,e){this.element=t,this.$element=$(t),this.options={},this._current=0,this.setOptions(e),this.$element.on("click.guides",$.proxy(this.start,this))};o.DEFAULTS={distance:100,color:"#fff",cssClass:"",guides:[]},o.prototype.start=function(t){return t&&t.preventDefault(),this.$canvas?this:(this._current=0,this._renderCanvas()._renderGuide(this.options.guides[this._current])._callback("start"),this)},o.prototype.end=function(){return this.$canvas&&(this.$canvas.remove(),this.$canvas=null),this._currentGuide&&(this._currentGuide.destroy(),this._currentGuide=null),$(document).off("keyup.guides"),this._callback("end"),this},o.prototype.next=function(){return this.options.guides[this._current].element.removeClass("guides-current-element"),this._renderGuide(this.options.guides[++this._current])._callback("next"),this},o.prototype.prev=function(){if(this._current)return this.options.guides[this._current].element.removeClass("guides-current-element"),this._renderGuide(this.options.guides[--this._current])._callback("prev"),this},o.prototype.setOptions=function(t){return"object"!=typeof t?this:void(this.options=$.extend({},o.DEFAULTS,this.options,t))},o.prototype.destroy=function(){return this.end(),this.$element.off("click.guides"),this._callback("destroy"),this},o.prototype._callback=function(t){var e=this.options[t],i={sender:this};this._currentGuide&&(i.$element=this._currentGuide.guide.element,i.$guide=this._currentGuide.$element),$.isFunction(e)&&e.apply(this,[i])},o.prototype._renderCanvas=function(){return this.$canvas=$("<div />",{class:"guides-canvas guides-fade-in",html:'<div class="guides-overlay"></div><div class="guides-mask"></div>'}).appendTo("body"),this._bindNavigation(),this},o.prototype._renderGuide=function(t){return t?(t.element.addClass("guides-current-element"),this._currentGuide&&this._currentGuide.destroy(),this._currentGuide=new s(t,this.$canvas,this.options),this):(this.end(),this)},o.prototype._bindNavigation=function(){return this.$canvas.on("click.guides",$.proxy(this._onCanvasClick,this)),$(document).on("keyup.guides",$.proxy(this._onDocKeyUp,this)),this},o.prototype._onCanvasClick=function(t){var e=window.innerWidth/2;t.clientX>e?this.next():this.prev()},o.prototype._onDocKeyUp=function(t){switch(t.which){case 27:this.end();break;case 39:case 32:this.next();break;case 37:case 8:t.preventDefault(),this.prev()}},e.exports=o},{"./Guide":2}],4:[function(t,e,i){e.exports=function(){for(var t=arguments[0],e=0;e<arguments.length-1;e++){var i=new RegExp("\\{"+e+"\\}","gm");t=t.replace(i,arguments[e+1])}return t}},{}]},{},[1]);