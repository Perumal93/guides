!function(a){"use strict";var b=function(){for(var a=arguments[0],b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b+1])}return a},c=function(a,b,c){this.guide=a,this._distance=a.distance||c.distance,this._color=a.color||c.color,this._class=a.cssClass||c.cssClass||"",this._origElWidth=this.guide.element.outerWidth(),this._origElHeight=this.guide.element.outerHeight(),this.$container=b,this.init()};c.prototype._arrowSize=10,c.prototype._path="M{0},{1} C{2},{3},{4},{5},{6},{7}",c.prototype._arrowTemplate='<svg width="{0}" height="{1}">    <defs>        <marker id="arrow" markerWidth="13" markerHeight="13" refX="2" refY="6" orient="auto">            <path d="M2,1 L2,{3} L{3},6 L2,2" style="fill:{4};"></path>        </marker>    </defs>    <path id="line" d="{2}" style="stroke:{4}; stroke-width: 1.25px; fill: none; marker-end: url(#arrow);"></path></svg>',c.prototype.init=function(){return this.$element=$("<div />",{"class":"guides-fade-in guides-guide "+this._class,html:"<span>"+this.guide.html+"</span>"}),this._position(),this.$element.appendTo(this.$container),this._renderArrow(),this._scrollIntoView(),this},c.prototype._position=function(){var a=this.guide.element.offset(),b=$(document).width(),c=$(document).height(),d=a.left,e=b-a.left-this._origElWidth,f=a.top,g=c-a.top-this._origElHeight,h={color:this._color,top:c/2>a.top?a.top:"auto",left:b/2>a.left?a.left:"auto",right:b/2>a.left?"auto":b-a.left-this._origElWidth,bottom:c/2>a.top?"auto":a.bottom};switch(Math.max(d,e,f,g)){case d:this.position="left",h.paddingRight=this._distance,h.right=$(document).width()-a.left;break;case f:this.position="top",h.paddingBottom=this._distance,h.bottom=$(document).height()-a.top;break;case e:this.position="right",h.paddingLeft=this._distance,h.left=a.left+this._origElWidth;break;default:this.position="bottom",h.paddingTop=this._distance,h.top=a.top+this._origElHeight}this.$element.addClass("guides-"+this.position).css(h)},c.prototype._renderArrow=function(){this._width=this.$element.outerWidth(),this._height=this.$element.outerHeight(),this.$element.append(b(this._arrowTemplate,this._width,this._distance,this[this.position](),this._arrowSize,this._color))},c.prototype.top=function(){var a=this._verticalAlign();return this._getPath(a)},c.prototype.bottom=function(){var a=this._verticalAlign(!0);return this._getPath(a)},c.prototype.left=function(){var a=this._horizontalAlign();return this._getPath(a)},c.prototype.right=function(){var a=this._horizontalAlign(!0);return this._getPath(a)},c.prototype._getPath=function(a){return b(this._path,a.x1,a.y1,a.dx1,a.dy1,a.dx2,a.dy2,a.x2,a.y2)},c.prototype._getFluctuation=function(){return Math.floor(20*Math.random())+10},c.prototype._verticalAlign=function(a){var b=this._width/2,c=a?this._distance:0,d=Math.max(Math.min(this.guide.element.offset().left+this._origElWidth/2-this.$element.offset().left,this._width-this._arrowSize),this._arrowSize),e=a?this._arrowSize:this._distance-this._arrowSize;return{x1:b,y1:c,x2:d,y2:e,dx1:Math.max(0,Math.min(Math.abs(2*b-d)/3,this._width)+this._getFluctuation()),dy1:a?Math.max(0,e+3*Math.abs(c-e)/4):Math.max(0,c+3*Math.abs(c-e)/4),dx2:Math.max(0,Math.min(Math.abs(b-3*d)/2,this._width)-this._getFluctuation()),dy2:a?Math.max(0,e+3*Math.abs(c-e)/4):Math.max(0,c+3*Math.abs(c-e)/4)}},c.prototype._horizontalAlign=function(a){var b=a?this._distance:this._width-this._distance,c=this._height/2,d=a?this._arrowSize:this._width-this._arrowSize,e=Math.max(Math.min(this.guide.element.offset().top+this._origElHeight/2-this.$element.offset().top,this._height-this._arrowSize),this._arrowSize);return{x1:b,y1:c,x2:d,y2:e,dx1:a?Math.max(0,d+3*Math.abs(b-d)/4):Math.max(0,b+3*Math.abs(b-d)/4),dy1:Math.max(0,Math.min(Math.abs(2*c-e)/3,this._height)+this._getFluctuation()),dx2:a?Math.max(0,d+3*Math.abs(b-d)/4):Math.max(0,b+3*Math.abs(b-d)/4),dy2:Math.max(0,Math.min(Math.abs(c-3*e)/2,this._height)+this._getFluctuation())}},c.prototype._scrollIntoView=function(){($(document).scrollTop()>this.guide.element.offset().top||$(document).scrollTop()+$(a).height()<this.guide.element.offset().top)&&$("html,body").animate({scrollTop:this.guide.element.offset().top},500),($(document).scrollLeft()>this.guide.element.offset().left||$(document).scrollLeft()+$(a).height()<this.guide.element.offset().left)&&$("html,body").animate({scrollLeft:this.guide.element.offset().left},500)},c.prototype.destroy=function(){this.$element.remove()};var d=function(a,b){this.element=a,this.$element=$(a),this.options={},this._current=0,this.setOptions(b),this.$element.on("click.guides",$.proxy(this.start,this))};d.DEFAULTS={distance:100,color:"#fff",cssClass:"",guides:[]},d.prototype.start=function(a){return a&&a.preventDefault(),this.$canvas?this:(this._current=0,this._renderCanvas()._renderGuide(this.options.guides[this._current])._callback("start"),this)},d.prototype.end=function(){return this.$canvas&&(this.$canvas.remove(),this.$canvas=null),this._currentGuide&&(this._currentGuide.destroy(),this._currentGuide=null),$(document).off("keyup.guides"),this._callback("end"),this},d.prototype.next=function(){return this.options.guides[this._current].element.removeClass("guides-current-element"),this._renderGuide(this.options.guides[++this._current])._callback("next"),this},d.prototype.prev=function(){return this._current?(this.options.guides[this._current].element.removeClass("guides-current-element"),this._renderGuide(this.options.guides[--this._current])._callback("prev"),this):void 0},d.prototype.setOptions=function(a){return"object"!=typeof a?this:void(this.options=$.extend({},d.DEFAULTS,this.options,a))},d.prototype.destroy=function(){return this.end(),this.$element.off("click.guides"),this._callback("destroy"),this},d.prototype._callback=function(a){var b=this.options[a],c={sender:this};this._currentGuide&&(c.$element=this._currentGuide.guide.element,c.$guide=this._currentGuide.$element),$.isFunction(b)&&b.apply(this,[c])},d.prototype._renderCanvas=function(){return this.$canvas=$("<div />",{"class":"guides-canvas guides-fade-in",html:'<div class="guides-overlay"></div><div class="guides-mask"></div>'}).appendTo("body"),this._bindNavigation(),this},d.prototype._renderGuide=function(a){return a?(a.element.addClass("guides-current-element"),this._currentGuide&&this._currentGuide.destroy(),this._currentGuide=new c(a,this.$canvas,this.options),this):(this.end(),this)},d.prototype._bindNavigation=function(){return this.$canvas.on("click.guides",$.proxy(this._onCanvasClick,this)),$(document).on("keyup.guides",$.proxy(this._onDocKeyUp,this)),this},d.prototype._onCanvasClick=function(b){var c=a.innerWidth/2;b.clientX>c?this.next():this.prev()},d.prototype._onDocKeyUp=function(a){switch(a.which){case 27:this.end();break;case 39:case 32:this.next();break;case 37:case 8:a.preventDefault(),this.prev()}},$.fn.guides=function(a,b){return this.each(function(){var c=$(this),e=c.data("guides"),f="object"==typeof a&&a;(e||"string"!=typeof f)&&(e||c.data("guides",e=new d(this,f)),"string"==typeof a&&e[a](b))})},$.fn.guides.Constructor=d}(window);
//# sourceMappingURL=guides.min.js.map